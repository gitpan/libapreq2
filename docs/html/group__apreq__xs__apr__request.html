<html>
<head>
  <link rel="stylesheet" type="text/css" href="dox.css" />
  <title>libapreq2-2.06-dev: libapreq2: APR::Request</title> 
</head>
<body>
<div id="page-header">
<p class="menu">
   <a href="http://www.apache.org/">Apache Software Foundation</a> &gt; <a href="http://httpd.apache.org">HTTP Server Project</a> &gt;
<a href="http://httpd.apache.org/apreq/">Request Library Subproject</a></p>
<p class="apache">Apache HTTP Server Request Library</p>
<img alt="" src="feather.gif" /></div>
<!-- Generated by Doxygen 1.4.3-20050530 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="annotated.html">Data&nbsp;Structures</a> | <a class="qindex" href="dirs.html">Directories</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Data&nbsp;Fields</a> | <a class="qindex" href="globals.html">Globals</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1>APR::Request<br>
<small>
[<a class="el" href="group__apreq__xs.html">Perl</a>]</small>
</h1><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
</table>



<p><a name="__index__"></a></p>

<!-- INDEX BEGIN -->


<ul>

	<li><a href="#name">NAME</a></li>
	<li><a href="#synopsis">SYNOPSIS</a></li>
	<li><a href="#description">DESCRIPTION</a></li>
	<li><a href="#methods">METHODS</a></li>
	<ul>

		<li><a href="#handle">handle</a></li>
	</ul>

	<li><a href="#methods">METHODS</a></li>
	<ul>

		<li><a href="#pool">pool</a></li>
		<li><a href="#bucket_alloc">bucket_alloc</a></li>
		<li><a href="#jar_status">jar_status</a></li>
		<li><a href="#args_status">args_status</a></li>
		<li><a href="#body_status">body_status</a></li>
		<li><a href="#param_status">param_status</a></li>
		<li><a href="#parse">parse</a></li>
		<li><a href="#jar">jar</a></li>
		<li><a href="#args">args</a></li>
		<li><a href="#body">body</a></li>
		<li><a href="#param">param</a></li>
		<li><a href="#uploads__apr__request__param__table_">uploads (APR::Request::Param::Table???)</a></li>
		<li><a href="#read_limit">read_limit</a></li>
		<li><a href="#brigade_limit">brigade_limit</a></li>
		<li><a href="#temp_dir">temp_dir</a></li>
		<li><a href="#disable_uploads">disable_uploads</a></li>
		<li><a href="#upload_hook">upload_hook</a></li>
		<li><a href="#import">import</a></li>
	</ul>

	<li><a href="#subroutines">SUBROUTINES</a></li>
	<ul>

		<li><a href="#encode">encode</a></li>
		<li><a href="#decode">decode</a></li>
	</ul>

	<li><a href="#subclassing">SUBCLASSING</a></li>
	<li><a href="#see_also">SEE ALSO</a></li>
	<li><a href="#copyright">COPYRIGHT</a></li>
</ul>

<!-- INDEX END -->


<hr />

<p>

</p>

<h1><a name="name">NAME</a></h1>

<p>APR::Request - wrapper for libapreq2's module/handle API.</p>

<p>

</p>
<hr />

<h1><a name="synopsis">SYNOPSIS</a></h1>

<pre>
  use APR::Request;</pre>

<pre>
  $req = APR::Request::Custom-&gt;handle($pool, 
                                      &quot;foo=arg1&amp;bar=arg2&quot;, 
                                      &quot;cookie=apache&quot;,
                                       $parser, 1e6, $bb);
  $param = $req-&gt;param(&quot;foo&quot;);
  $cookie = $req-&gt;jar(&quot;cookie&quot;);</pre>

<p>

</p>
<hr />

<h1><a name="description">DESCRIPTION</a></h1>

<p>The <code>APR::Request</code> module provides the base methods
for interfacing with libapreq2's module API.  It also provides
a few utility functions and constants.</p>

<p>This manpage documents the APR::Request and APR::Request::Custom
packages.</p>

<p>

</p>
<hr />

<h1><a name="methods">METHODS</a></h1>

<p>APR::Request::Custom - derived from APR::Request.</p>

<p>

</p>

<h2><a name="handle">handle</a></h2>

<pre>
    APR::Request::Custom-&gt;handle($pool, 
                                 $query_string,
                                 $cookie_header,
                                 $parser,
                                 $read_limit,
                                 $brigade)</pre>

<p>Creates a new APR::Request::Custom object.  The $query_string
and $cookie_headers are immediately parsed into the <code>args</code> and 
<code>jar</code> tables.  The $parser is an APR::Request::Parser object
which is invoked when fetching <code>body</code> entries from the $brigade. 
The $read_limit represents the maximum number of bytes this handle 
may feed into the parser.</p>

<p>

</p>
<hr />

<h1><a name="methods">METHODS</a></h1>

<p>APR::Request</p>

<p>

</p>

<h2><a name="pool">pool</a></h2>

<pre>
    $req-&gt;pool()</pre>

<p>Returns the APR::Pool object associated to this handle.</p>

<p>

</p>

<h2><a name="bucket_alloc">bucket_alloc</a></h2>

<pre>
    $req-&gt;bucket_alloc()</pre>

<p>Returns the APR::BucketAlloc object associated to this handle.</p>

<p>

</p>

<h2><a name="jar_status">jar_status</a></h2>

<pre>
    $req-&gt;jar_status()</pre>

<p>Returns the final status code of the handle's cookie header parser.</p>

<p>

</p>

<h2><a name="args_status">args_status</a></h2>

<pre>
    $req-&gt;args_status()</pre>

<p>Returns the final status code of the handle's query-string parser.</p>

<p>

</p>

<h2><a name="body_status">body_status</a></h2>

<pre>
    $req-&gt;body_status()</pre>

<p>Returns the final status code of the handle's body parser.</p>

<p>

</p>

<h2><a name="param_status">param_status</a></h2>

<pre>
    $req-&gt;param_status()</pre>

<p>Returns <code>($req-&gt;args_status, $req-&gt;body_status)</code> in list
context; otherwise returns <code>$req-&gt;args_status || $req-&gt;body_status</code>.</p>

<p>

</p>

<h2><a name="parse">parse</a></h2>

<pre>
    $req-&gt;parse()</pre>

<p>Parses the jar, args, and body tables. Returns 
<code>$req-&gt;jar_status, $req-&gt;args_status, $req-&gt;body_status</code>.</p>

<p>

</p>

<h2><a name="jar">jar</a></h2>

<pre>
    $req-&gt;jar()
    $req-&gt;jar($key)</pre>

<p>With no arguments, this method returns a tied APR::Request::Cookie::Table 
object in scalar context, or the names (in order, with repetitions) of all
the parsed cookies.</p>

<p>With the <code>$key</code> argument, in scalar context this method fetches the first 
matching cookie.  In list context it returns all matching cookies.
The returned cookies are the values as they appeared in the incoming
Cookie header.</p>

<p>

</p>

<h2><a name="args">args</a></h2>

<pre>
    $req-&gt;args()
    $req-&gt;args($key)</pre>

<p>With no arguments, this method returns a tied APR::Request::Param::Table 
object in scalar context, or the names (in order, with repetitions) of all
the parsed query-string arguments.</p>

<p>With the <code>$key</code> argument, in scalar context this method fetches the first 
matching query-string arg.  In list context it returns all matching args.</p>

<p>

</p>

<h2><a name="body">body</a></h2>

<pre>
    $req-&gt;body()
    $req-&gt;body($key)</pre>

<p>With no arguments, this method returns a tied APR::Request::Param::Table 
object in scalar context, or the names (in order, with repetitions) of all
the parsed cookies.</p>

<p>With the <code>$key</code> argument, in scalar context this method fetches the first 
matching body param.  In list context it returns all matching body params.</p>

<p>

</p>

<h2><a name="param">param</a></h2>

<pre>
    $req-&gt;param()
    $req-&gt;param($key)</pre>

<p>With no arguments, this method returns a tied APR::Request::Cookie::Table 
object in scalar context, or the names (in order, with repetitions) of all
the incoming (args + body) params.</p>

<p>With the <code>$key</code> argument, in scalar context this method fetches the first 
matching param.  In list context it returns all matching params.</p>

<p>

</p>

<h2><a name="uploads__apr__request__param__table_">uploads (APR::Request::Param::Table???)</a></h2>

<pre>
    $req-&gt;uploads()
    $req-&gt;uploads($key)</pre>

<p>

</p>

<h2><a name="read_limit">read_limit</a></h2>

<pre>
    $req-&gt;read_limit()
    $req-&gt;read_limit($set)</pre>

<p>

</p>

<h2><a name="brigade_limit">brigade_limit</a></h2>

<pre>
    $req-&gt;brigade_limit()
    $req-&gt;brigade_limit($set)</pre>

<p>Get/set the brigade_limit for the current parser.  This limit
determines how many bytes of a file upload that the parser may 
spool into main memory.  Uploads exceeding this limit are written
directly to disk.</p>

<p>

</p>

<h2><a name="temp_dir">temp_dir</a></h2>

<pre>
    $req-&gt;temp_dir()
    $req-&gt;temp_dir($set)</pre>

<p>Get/set the spool directory for uploads which exceed the configured
brigade_limit.</p>

<p>

</p>

<h2><a name="disable_uploads">disable_uploads</a></h2>

<pre>
    $req-&gt;disable_uploads()</pre>

<p>Engage the disable_uploads hook for this request.</p>

<p>

</p>

<h2><a name="upload_hook">upload_hook</a></h2>

<pre>
    $req-&gt;upload_hook($callback)</pre>

<p>Add an upload hook callback for this request.  The
arguments to the $callback sub are ($upload, $new_data).</p>

<p>

</p>

<h2><a name="import">import</a></h2>

<p>Exports a list of subs into the caller's package.</p>

<p>

</p>
<hr />

<h1><a name="subroutines">SUBROUTINES</a></h1>

<p>APR::Request</p>

<p>

</p>

<h2><a name="encode">encode</a></h2>

<pre>
    encode($string)</pre>

<p>Exportable sub which returns the url-encoded form of <code>$string</code>.</p>

<p>

</p>

<h2><a name="decode">decode</a></h2>

<pre>
    decode($string)</pre>

<p>Exportable sub which returns the url-decoded form of <code>$string</code>.</p>

<p>

</p>
<hr />

<h1><a name="subclassing">SUBCLASSING</a></h1>

<p>APR::Request</p>

<p>If the instances of your subclass are hash references then you can actually
inherit from APR::Request as long as the APR::Request object is stored in
an attribute called ``r'' or ``_r''. (The APR::Request class effectively does the
delegation for you automagically, as long as it knows where to find the
APR::Request object to delegate to.)  For example:</p>

<pre>
        package MySubClass;
        use APR::Request::Custom;
        our @ISA = qw(APR::Request);
        sub new {
                my($class, @args) = @_;
                return bless { r =&gt; APR::Request::Custom-&gt;handle(@args) }, $class;
        }</pre>

<p>

</p>
<hr />

<h1><a name="see_also">SEE ALSO</a></h1>

<p><a href="/APR/Request/Error.html">the APR::Request::Error manpage</a>, <a href="/APR/Request/Param.html">the APR::Request::Param manpage</a>,
<a href="/APR/Request/Cookie.html">the APR::Request::Cookie manpage</a>, <a href="/APR/Request/Parser.html">the APR::Request::Parser manpage</a></p>

<p>

</p>
<hr />

<h1><a name="copyright">COPYRIGHT</a></h1>

<pre>
  Copyright 2003-2005  The Apache Software Foundation</pre>

<pre>
  Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at</pre>

<pre>
      <a href="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</a></pre>

<pre>
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.</pre>


<div id="footer">
<p class="apache">
Copyright &copy; 2003-2005 <a href="http://www.apache.org">The Apache Software Foundation</a>.<br/>
See <a href="apreq_license.html">LICENSE</a>.</p>
<p class="menu">
<span style="color:#aaa">page generated by <a href="http://www.doxygen.org/"><code>doxygen</code></a>
version 1.4.3-20050530 on 19 Jul 2005</span>
</p>
</div>
</body>
</html>
