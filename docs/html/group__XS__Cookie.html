<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Apache::Cookie</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="modules.html">Modules</a> &nbsp; <a class="qindex" href="annotated.html">Data Structures</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Data Fields</a> &nbsp; <a class="qindex" href="globals.html">Globals</a> &nbsp; <a class="qindex" href="pages.html">Related Pages</a> &nbsp; </center>
<hr><h1>Apache::Cookie<br>
<small>
[<a class="el" href="group__XS.html">Perl</a>]</small>
</h1><table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
</table>


<p><a name="__index__"></a></p>
<!-- INDEX BEGIN -->

<ul>

	<li><a href="#name">NAME</a></li>
	<li><a href="#synopsis">SYNOPSIS</a></li>
	<li><a href="#description">DESCRIPTION</a></li>
	<li><a href="#apache::cookie_methods">Apache::Cookie METHODS</a></li>
	<ul>

		<li><a href="#new">new</a></li>
		<li><a href="#bake">bake</a></li>
		<li><a href="#bake2">bake2</a></li>
		<li><a href="#fetch">fetch</a></li>
		<li><a href="#as_string">as_string</a></li>
		<li><a href="#name">name</a></li>
		<li><a href="#value">value</a></li>
		<li><a href="#raw_value">raw_value</a></li>
		<li><a href="#domain">domain</a></li>
		<li><a href="#path">path</a></li>
		<li><a href="#expires">expires</a></li>
		<li><a href="#secure">secure</a></li>
	</ul>

	<li><a href="#changes_to_the_v1_api:">CHANGES to the v1 API:</a></li>
	<li><a href="#bugs">BUGS</a></li>
	<li><a href="#see_also">SEE ALSO</a></li>
	<li><a href="#authors">AUTHORS</a></li>
	<li><a href="#missing_docs">MISSING DOCS</a></li>
</ul>
<!-- INDEX END -->

<hr />
<p>
</p>
<h1><a name="name">NAME</a></h1>
<p>Apache::Cookie - HTTP Cookies Class</p>
<p>
</p>
<hr />
<h1><a name="synopsis">SYNOPSIS</a></h1>
<pre>
    use Apache::Cookie ();
    my $r = Apache-&gt;request;
    my $cookie = Apache::Cookie-&gt;new($r, ...);</pre>
<p>
</p>
<hr />
<h1><a name="description">DESCRIPTION</a></h1>
<p>The Apache::Cookie module is a Perl interface to the cookie routines
in <em>libapreq</em>.  The interface is based on Lincoln Stein's CGI::Cookie
module.</p>
<p>
</p>
<hr />
<h1><a name="apache::cookie_methods">Apache::Cookie METHODS</a></h1>
<p><em>Apache::Cookie</em> does not export any symbols to the caller's namespace.
Except for the request object passed to <code>Apache::Cookie::new</code>, the OO
interface is identical to <em>CGI::Cookie</em>.  Please consult the <a href="/CGI/Cookie.html">the CGI::Cookie manpage</a>
documentation for more details.</p>
<p>
</p>
<h2><a name="new">new</a></h2>
<p>Just like CGI::Cookie::new, but requires an <em>Apache</em> request object:</p>
<pre>
        my $cookie = Apache::Cookie-&gt;new($r,
                             -name    =&gt;  'foo', 
                             -value   =&gt;  'bar', 
                             -expires =&gt;  '+3M', 
                             -domain  =&gt;  '.capricorn.com', 
                             -path    =&gt;  '/cgi-bin/database',
                             -secure  =&gt;  1 
                            );</pre>
<p>The <code>-value</code> attribute may be either an arrayref, a hashref, or
an object with a <code>freeze</code> method.  The &lt;freeze&gt; method must serialize
the object in a manner compatible with the ``value'' portion of the 
Cookie specs. Specifically, it must take care to avoid header tokens [;,=] 
and whitespace characters in its output.</p>
<p>
</p>
<h2><a name="bake">bake</a></h2>
<p>Add a <em>Set-Cookie</em> header to the outgoing headers table.</p>
<pre>
    $cookie-&gt;bake;</pre>
<p>
</p>
<h2><a name="bake2">bake2</a></h2>
<p>Add a <em>Set-Cookie2</em> header to the outgoing headers table.</p>
<pre>
    $cookie-&gt;bake2;</pre>
<p>
</p>
<h2><a name="fetch">fetch</a></h2>
<p>Fetch and parse the incoming <em>Cookie</em> header:</p>
<pre>
    my $cookies = Apache::Cookie-&gt;fetch($r); #hash ref</pre>
<pre>
    my %cookies = Apache::Cookie-&gt;fetch($r);</pre>
<p>
</p>
<h2><a name="as_string">as_string</a></h2>
<p>Format the cookie object as a string:</p>
<pre>
 #same as $cookie-&gt;bake
 $r-&gt;headers_out-&gt;add(&quot;Set-Cookie&quot; =&gt; $cookie-&gt;as_string);</pre>
<p>
</p>
<h2><a name="name">name</a></h2>
<p>Get the name of the cookie:</p>
<pre>
 my $name = $cookie-&gt;name;</pre>
<p>
</p>
<h2><a name="value">value</a></h2>
<p>Get the value of the cookie:</p>
<pre>
 my $value = $cookie-&gt;value;
 my @values = $cookie-&gt;value;</pre>
<p>Note: if the cookie's value was serialized from an object possessing a 
<code>freeze</code> method, one way to reconstitute the object is by subclassing 
Apache::Cookie with a package that provides the associated <code>thaw</code> sub:</p>
<pre>
  package My::Cookie;
  use base 'Apache::Cookie';
  sub thaw { ... }
  bless $cookie, __PACKAGE__;</pre>
<pre>
  my $obj = $cookie-&gt;value;  # same as $cookie-&gt;thaw($cookie-&gt;raw_value);</pre>
<p>
</p>
<h2><a name="raw_value">raw_value</a></h2>
<p>Gets the raw (opaque) value string as it appears in the incoming
``Cookie'' header.</p>
<p>
</p>
<h2><a name="domain">domain</a></h2>
<p>Get or set the domain for the cookie:</p>
<pre>
 my $domain = $cookie-&gt;domain;
 $cookie-&gt;domain(&quot;.cp.net&quot;);</pre>
<p>
</p>
<h2><a name="path">path</a></h2>
<p>Get or set the path for the cookie:</p>
<pre>
 my $path = $cookie-&gt;path;
 $cookie-&gt;path(&quot;/&quot;);</pre>
<p>
</p>
<h2><a name="expires">expires</a></h2>
<p>Get or set the expire time for the cookie:</p>
<pre>
 my $expires = $cookie-&gt;expires;
 $cookie-&gt;expires(&quot;+3h&quot;);</pre>
<p>
</p>
<h2><a name="secure">secure</a></h2>
<p>Get or set the secure flag for the cookie:</p>
<pre>
 my $secure = $cookie-&gt;secure;
 $cookie-&gt;secure(1);</pre>
<p>
</p>
<hr />
<h1><a name="changes_to_the_v1_api:">CHANGES to the v1 API:</a></h1>
<ul>
<li><strong><a name="item_as"><code>Apache::Cookie::fetch</code> requires an <code>$r</code> object as (second) argument.</a></strong><br />
</li>
<li><strong><a name="item_apache%3a%3acookie%3a%3aparse_is_gone%2e"><code>Apache::Cookie::parse</code> is gone.</a></strong><br />
</li>
<li><strong><a name="item_apache%3a%3acookie%3a%3anew_can_take_an_object_as_"><code>Apache::Cookie::new</code> can take an object as its -value arg, assuming
        the object has a valid <code>freeze</code> method.</a></strong><br />
</li>
<li><strong><a name="item_name_and_%3cvalue%3e_no_longer_accept_a_%22set%22_"><code>name</code> and &lt;value&gt; no longer accept a ``set'' argument. In other words,
        neither a cookie's name, nor its value, may be modified.  A new cookie
        should be made instead.</a></strong><br />
</li>
</ul>
<p>
</p>
<hr />
<h1><a name="bugs">BUGS</a></h1>
<p>
</p>
<hr />
<h1><a name="see_also">SEE ALSO</a></h1>
<p>Apache(3), Apache::Request(3), CGI::Cookie(3)</p>
<p>
</p>
<hr />
<h1><a name="authors">AUTHORS</a></h1>
<p>Doug MacEachern, Joe Schaefer, Issac Goldstand</p>
<p>
</p>
<hr />
<h1><a name="missing_docs">MISSING DOCS</a></h1>
<p>Apache::Cookie::Jar, Apache::Cookie::Table</p>

 <hr><address style="align: right;"><small>Generated on Mon Nov 10 20:12:45 2003 for libapreq2 by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.3 </small></address>
</body>
</html>
