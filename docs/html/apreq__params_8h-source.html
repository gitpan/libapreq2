<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>apreq_params.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.2.15 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="modules.html">Modules</a> &nbsp; <a class="qindex" href="annotated.html">Data Structures</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Data Fields</a> &nbsp; <a class="qindex" href="globals.html">Globals</a> &nbsp; <a class="qindex" href="pages.html">Related Pages</a> &nbsp; </center>
<hr><h1>apreq_params.h</h1><a href="apreq__params_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <font class="comment">/*</font>
00002 <font class="comment">**  Copyright 2003-2004  The Apache Software Foundation</font>
00003 <font class="comment">**</font>
00004 <font class="comment">**  Licensed under the Apache License, Version 2.0 (the "License");</font>
00005 <font class="comment">**  you may not use this file except in compliance with the License.</font>
00006 <font class="comment">**  You may obtain a copy of the License at</font>
00007 <font class="comment">**</font>
00008 <font class="comment">**      http://www.apache.org/licenses/LICENSE-2.0</font>
00009 <font class="comment">**</font>
00010 <font class="comment">**  Unless required by applicable law or agreed to in writing, software</font>
00011 <font class="comment">**  distributed under the License is distributed on an "AS IS" BASIS,</font>
00012 <font class="comment">**  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</font>
00013 <font class="comment">**  See the License for the specific language governing permissions and</font>
00014 <font class="comment">**  limitations under the License.</font>
00015 <font class="comment">*/</font>
00016 
00017 <font class="preprocessor">#ifndef APREQ_PARAM_H</font>
00018 <font class="preprocessor"></font><font class="preprocessor">#define APREQ_PARAM_H</font>
00019 <font class="preprocessor"></font>
00020 <font class="preprocessor">#include "<a class="code" href="apreq_8h.html">apreq.h</a>"</font>
00021 
00022 <font class="preprocessor">#ifdef __cplusplus</font>
00023 <font class="preprocessor"></font><font class="keyword">extern</font> <font class="stringliteral">"C"</font> {
00024 <font class="preprocessor">#endif </font><font class="comment">/* __cplusplus */</font>
00025 
00026 
<a name="l00039"></a><a class="code" href="structapreq__param__t.html">00039</a> <font class="keyword">typedef</font> <font class="keyword">struct </font><a class="code" href="structapreq__param__t.html">apreq_param_t</a> {
<a name="l00040"></a><a class="code" href="structapreq__param__t.html#m0">00040</a>     <a class="codeRef" doxygen="apr.tag:http://apr.apache.org/docs/apr/" href="http://apr.apache.org/docs/apr/apr__tables_8h.html#a0">apr_table_t</a>         *<a class="code" href="structapreq__param__t.html#m0">info</a>; 
<a name="l00041"></a><a class="code" href="structapreq__param__t.html#m1">00041</a>     <a class="codeRef" doxygen="apu.tag:http://apr.apache.org/docs/apr-util/" href="http://apr.apache.org/docs/apr-util/structapr__bucket__brigade.html">apr_bucket_brigade</a>  *<a class="code" href="structapreq__param__t.html#m1">bb</a>;   
<a name="l00042"></a><a class="code" href="structapreq__param__t.html#m2">00042</a>     <a class="code" href="structapreq__value__t.html">apreq_value_t</a>        <a class="code" href="structapreq__param__t.html#m2">v</a>;    
00043 } <a class="code" href="structapreq__param__t.html">apreq_param_t</a>;
00044 
00045 <font class="comment">/* These structs are defined below */</font>
00046 <font class="keyword">typedef</font> <font class="keyword">struct </font><a class="code" href="structapreq__hook__t.html">apreq_hook_t</a> apreq_hook_t;
00047 <font class="keyword">typedef</font> <font class="keyword">struct </font><a class="code" href="structapreq__parser__t.html">apreq_parser_t</a> apreq_parser_t;
00048 
<a name="l00050"></a><a class="code" href="group__params.html#a22">00050</a> <font class="preprocessor">#define apreq_value_to_param(ptr) apreq_attr_to_type(apreq_param_t, v, ptr)</font>
00051 <font class="preprocessor"></font><font class="preprocessor">#define apreq_param_name(p)      ((p)-&gt;v.name)</font>
00052 <font class="preprocessor"></font><font class="preprocessor">#define apreq_param_value(p)     ((p)-&gt;v.data)</font>
00053 <font class="preprocessor"></font><font class="preprocessor">#define apreq_param_info(p)      ((p)-&gt;info)</font>
00054 <font class="preprocessor"></font><font class="preprocessor">#define apreq_param_status(p)    ((p)-&gt;v.status)</font>
00055 <font class="preprocessor"></font><font class="preprocessor">#define apreq_param_brigade(p) ((p)-&gt;bb ? apreq_copy_brigade((p)-&gt;bb) : NULL)</font>
00056 <font class="preprocessor"></font>
00058 APREQ_DECLARE(<a class="code" href="structapreq__param__t.html">apreq_param_t</a> *) apreq_make_param(<a class="codeRef" doxygen="apr.tag:http://apr.apache.org/docs/apr/" href="http://apr.apache.org/docs/apr/apr__pools_8h.html#a0">apr_pool_t</a> *p, 
00059                                                 <font class="keyword">const</font> <font class="keywordtype">char</font> *name, 
00060                                                 <font class="keyword">const</font> <a class="codeRef" doxygen="apr.tag:http://apr.apache.org/docs/apr/" href="http://apr.apache.org/docs/apr/apr_8h.html#a7">apr_size_t</a> nlen, 
00061                                                 <font class="keyword">const</font> <font class="keywordtype">char</font> *val, 
00062                                                 <font class="keyword">const</font> <a class="codeRef" doxygen="apr.tag:http://apr.apache.org/docs/apr/" href="http://apr.apache.org/docs/apr/apr_8h.html#a7">apr_size_t</a> vlen);
00063 
<a name="l00065"></a><a class="code" href="structapreq__request__t.html">00065</a> <font class="keyword">typedef</font> <font class="keyword">struct </font><a class="code" href="structapreq__request__t.html">apreq_request_t</a> {
<a name="l00066"></a><a class="code" href="structapreq__request__t.html#m0">00066</a>     <a class="codeRef" doxygen="apr.tag:http://apr.apache.org/docs/apr/" href="http://apr.apache.org/docs/apr/apr__tables_8h.html#a0">apr_table_t</a>        *<a class="code" href="structapreq__request__t.html#m0">args</a>;         
<a name="l00067"></a><a class="code" href="structapreq__request__t.html#m1">00067</a>     <a class="codeRef" doxygen="apr.tag:http://apr.apache.org/docs/apr/" href="http://apr.apache.org/docs/apr/apr__tables_8h.html#a0">apr_table_t</a>        *<a class="code" href="structapreq__request__t.html#m1">body</a>;         
<a name="l00068"></a><a class="code" href="structapreq__request__t.html#m2">00068</a>     apreq_parser_t     *<a class="code" href="structapreq__request__t.html#m2">parser</a>;       
<a name="l00069"></a><a class="code" href="structapreq__request__t.html#m3">00069</a>     <font class="keywordtype">void</font>               *<a class="code" href="structapreq__request__t.html#m3">env</a>;          
00070 } <a class="code" href="structapreq__request__t.html">apreq_request_t</a>;
00071 
00072 
00089 APREQ_DECLARE(<a class="code" href="structapreq__request__t.html">apreq_request_t</a> *)apreq_request(<font class="keywordtype">void</font> *env, <font class="keyword">const</font> <font class="keywordtype">char</font> *qs);
00090 
00091 
00100 APREQ_DECLARE(<a class="code" href="structapreq__param__t.html">apreq_param_t</a> *) apreq_param(<font class="keyword">const</font> <a class="code" href="structapreq__request__t.html">apreq_request_t</a> *req, 
00101                                            <font class="keyword">const</font> <font class="keywordtype">char</font> *name); 
00102 
00103 
00111 APREQ_DECLARE(<a class="codeRef" doxygen="apr.tag:http://apr.apache.org/docs/apr/" href="http://apr.apache.org/docs/apr/apr__tables_8h.html#a0">apr_table_t</a> *) apreq_params(<a class="codeRef" doxygen="apr.tag:http://apr.apache.org/docs/apr/" href="http://apr.apache.org/docs/apr/apr__pools_8h.html#a0">apr_pool_t</a> *p,
00112                                           <font class="keyword">const</font> <a class="code" href="structapreq__request__t.html">apreq_request_t</a> *req);
00113 
00114 
00115 
00124 APREQ_DECLARE(<a class="codeRef" doxygen="apr.tag:http://apr.apache.org/docs/apr/" href="http://apr.apache.org/docs/apr/structapr__array__header__t.html">apr_array_header_t</a> *) apreq_params_as_array(<a class="codeRef" doxygen="apr.tag:http://apr.apache.org/docs/apr/" href="http://apr.apache.org/docs/apr/apr__pools_8h.html#a0">apr_pool_t</a> *p,
00125                                                           <a class="code" href="structapreq__request__t.html">apreq_request_t</a> *req,
00126                                                           <font class="keyword">const</font> <font class="keywordtype">char</font> *<a class="codeRef" doxygen="apr.tag:http://apr.apache.org/docs/apr/" href="http://apr.apache.org/docs/apr/apr__tables_8h.html#a3">key</a>);
00127 
00139 APREQ_DECLARE(<font class="keyword">const</font> <font class="keywordtype">char</font> *) apreq_params_as_string(<a class="codeRef" doxygen="apr.tag:http://apr.apache.org/docs/apr/" href="http://apr.apache.org/docs/apr/apr__pools_8h.html#a0">apr_pool_t</a> *p,
00140                                                    <a class="code" href="structapreq__request__t.html">apreq_request_t</a> *req,
00141                                                    <font class="keyword">const</font> <font class="keywordtype">char</font> *<a class="codeRef" doxygen="apr.tag:http://apr.apache.org/docs/apr/" href="http://apr.apache.org/docs/apr/apr__tables_8h.html#a3">key</a>,
00142                                                    <a class="code" href="apreq_8h.html#a36">apreq_join_t</a> mode);
00143 
00144 
00156 APREQ_DECLARE(<a class="code" href="structapreq__param__t.html">apreq_param_t</a> *) apreq_decode_param(<a class="codeRef" doxygen="apr.tag:http://apr.apache.org/docs/apr/" href="http://apr.apache.org/docs/apr/apr__pools_8h.html#a0">apr_pool_t</a> *pool, 
00157                                                   <font class="keyword">const</font> <font class="keywordtype">char</font> *word,
00158                                                   <font class="keyword">const</font> <a class="codeRef" doxygen="apr.tag:http://apr.apache.org/docs/apr/" href="http://apr.apache.org/docs/apr/apr_8h.html#a7">apr_size_t</a> nlen, 
00159                                                   <font class="keyword">const</font> <a class="codeRef" doxygen="apr.tag:http://apr.apache.org/docs/apr/" href="http://apr.apache.org/docs/apr/apr_8h.html#a7">apr_size_t</a> vlen);
00167 APREQ_DECLARE(<font class="keywordtype">char</font> *) apreq_encode_param(<a class="codeRef" doxygen="apr.tag:http://apr.apache.org/docs/apr/" href="http://apr.apache.org/docs/apr/apr__pools_8h.html#a0">apr_pool_t</a> *pool, 
00168                                          <font class="keyword">const</font> <a class="code" href="structapreq__param__t.html">apreq_param_t</a> *param);
00169 
00182 APREQ_DECLARE(<a class="codeRef" doxygen="apr.tag:http://apr.apache.org/docs/apr/" href="http://apr.apache.org/docs/apr/apr__errno_8h.html#a0">apr_status_t</a>) apreq_parse_query_string(<a class="codeRef" doxygen="apr.tag:http://apr.apache.org/docs/apr/" href="http://apr.apache.org/docs/apr/apr__pools_8h.html#a0">apr_pool_t</a> *pool,
00183                                                      <a class="codeRef" doxygen="apr.tag:http://apr.apache.org/docs/apr/" href="http://apr.apache.org/docs/apr/apr__tables_8h.html#a0">apr_table_t</a> *t, 
00184                                                      <font class="keyword">const</font> <font class="keywordtype">char</font> *qs);
00185 
00195 APREQ_DECLARE(<a class="codeRef" doxygen="apr.tag:http://apr.apache.org/docs/apr/" href="http://apr.apache.org/docs/apr/apr__errno_8h.html#a0">apr_status_t</a>)apreq_parse_request(<a class="code" href="structapreq__request__t.html">apreq_request_t</a> *req, 
00196                                                <a class="codeRef" doxygen="apu.tag:http://apr.apache.org/docs/apr-util/" href="http://apr.apache.org/docs/apr-util/structapr__bucket__brigade.html">apr_bucket_brigade</a> *bb);
00205 APREQ_DECLARE(<a class="codeRef" doxygen="apr.tag:http://apr.apache.org/docs/apr/" href="http://apr.apache.org/docs/apr/apr__tables_8h.html#a0">apr_table_t</a> *) apreq_uploads(<a class="codeRef" doxygen="apr.tag:http://apr.apache.org/docs/apr/" href="http://apr.apache.org/docs/apr/apr__pools_8h.html#a0">apr_pool_t</a> *pool,
00206                                            <font class="keyword">const</font> <a class="code" href="structapreq__request__t.html">apreq_request_t</a> *req);
00207 
00217 APREQ_DECLARE(<a class="code" href="structapreq__param__t.html">apreq_param_t</a> *) apreq_upload(<font class="keyword">const</font> <a class="code" href="structapreq__request__t.html">apreq_request_t</a> *req,
00218                                             <font class="keyword">const</font> <font class="keywordtype">char</font> *<a class="codeRef" doxygen="apr.tag:http://apr.apache.org/docs/apr/" href="http://apr.apache.org/docs/apr/apr__tables_8h.html#a3">key</a>);
00219 
<a name="l00221"></a><a class="code" href="group__params.html#a28">00221</a> <font class="preprocessor">#define APREQ_PARSER_ARGS (apreq_parser_t *parser,     \</font>
00222 <font class="preprocessor">                           void *env,                  \</font>
00223 <font class="preprocessor">                           apr_table_t *t,             \</font>
00224 <font class="preprocessor">                           apr_bucket_brigade *bb)</font>
00225 <font class="preprocessor"></font>
<a name="l00227"></a><a class="code" href="group__params.html#a29">00227</a> <font class="preprocessor">#define APREQ_HOOK_ARGS   (apreq_hook_t *hook,         \</font>
00228 <font class="preprocessor">                           void *env,                  \</font>
00229 <font class="preprocessor">                           const apreq_param_t *param, \</font>
00230 <font class="preprocessor">                           apr_bucket_brigade *bb)</font>
00231 <font class="preprocessor"></font>
00235 <font class="preprocessor">#ifndef WIN32</font>
<a name="l00236"></a><a class="code" href="group__params.html#a30">00236</a> <font class="preprocessor"></font><font class="preprocessor">#define APREQ_DECLARE_PARSER(f) APREQ_DECLARE(apr_status_t) \</font>
00237 <font class="preprocessor">                                (f) APREQ_PARSER_ARGS</font>
00238 <font class="preprocessor"></font><font class="preprocessor">#else</font>
00239 <font class="preprocessor"></font><font class="preprocessor">#define APREQ_DECLARE_PARSER(f) APREQ_DECLARE_NONSTD(apr_status_t) \</font>
00240 <font class="preprocessor">                                (f) APREQ_PARSER_ARGS</font>
00241 <font class="preprocessor"></font><font class="preprocessor">#endif</font>
00242 <font class="preprocessor"></font>
00246 <font class="preprocessor">#ifndef WIN32</font>
<a name="l00247"></a><a class="code" href="group__params.html#a31">00247</a> <font class="preprocessor"></font><font class="preprocessor">#define APREQ_DECLARE_HOOK(f)   APREQ_DECLARE(apr_status_t) \</font>
00248 <font class="preprocessor">                                (f) APREQ_HOOK_ARGS</font>
00249 <font class="preprocessor"></font><font class="preprocessor">#else</font>
00250 <font class="preprocessor"></font><font class="preprocessor">#define APREQ_DECLARE_HOOK(f)   APREQ_DECLARE_NONSTD(apr_status_t) \</font>
00251 <font class="preprocessor">                                (f) APREQ_HOOK_ARGS</font>
00252 <font class="preprocessor"></font><font class="preprocessor">#endif</font>
00253 <font class="preprocessor"></font>
<a name="l00258"></a><a class="code" href="structapreq__hook__t.html">00258</a> <font class="keyword">struct </font>apreq_hook_t {
00259     <a class="codeRef" doxygen="apr.tag:http://apr.apache.org/docs/apr/" href="http://apr.apache.org/docs/apr/apr__errno_8h.html#a0">apr_status_t</a>  (*hook) APREQ_HOOK_ARGS;
00260     apreq_hook_t   *next;
00261     <font class="keywordtype">void</font>           *ctx;
00262 };
00263 
<a name="l00268"></a><a class="code" href="structapreq__parser__t.html">00268</a> <font class="keyword">struct </font>apreq_parser_t {
00269     <a class="codeRef" doxygen="apr.tag:http://apr.apache.org/docs/apr/" href="http://apr.apache.org/docs/apr/apr__errno_8h.html#a0">apr_status_t</a> (*parser) APREQ_PARSER_ARGS;
00270     <font class="keyword">const</font> <font class="keywordtype">char</font>    *enctype;
00271     apreq_hook_t  *hook;
00272     <font class="keywordtype">void</font>          *ctx;
00273 };
00274 
00275 
<a name="l00279"></a><a class="code" href="group__params.html#a32">00279</a> <font class="preprocessor">#define APREQ_RUN_PARSER(psr,env,t,bb) (psr)-&gt;parser(psr,env,t,bb)</font>
00280 <font class="preprocessor"></font>
<a name="l00287"></a><a class="code" href="group__params.html#a33">00287</a> <font class="preprocessor">#define APREQ_RUN_HOOK(h,env,param,bb) (h)-&gt;hook(h,env,param,bb)</font>
00288 <font class="preprocessor"></font>
00298 APREQ_DECLARE(<a class="codeRef" doxygen="apr.tag:http://apr.apache.org/docs/apr/" href="http://apr.apache.org/docs/apr/apr__errno_8h.html#a0">apr_status_t</a>) apreq_brigade_concat(<font class="keywordtype">void</font> *env,
00299                                                  <a class="codeRef" doxygen="apu.tag:http://apr.apache.org/docs/apr-util/" href="http://apr.apache.org/docs/apr-util/structapr__bucket__brigade.html">apr_bucket_brigade</a> *out, 
00300                                                  <a class="codeRef" doxygen="apu.tag:http://apr.apache.org/docs/apr-util/" href="http://apr.apache.org/docs/apr-util/structapr__bucket__brigade.html">apr_bucket_brigade</a> *in);
00301 
00302 
00306 <a class="code" href="apreq__params_8h.html#a30">APREQ_DECLARE_PARSER</a>(apreq_parse_headers);
00307 
00311 <a class="code" href="apreq__params_8h.html#a30">APREQ_DECLARE_PARSER</a>(apreq_parse_urlencoded);
00312 
00316 <a class="code" href="apreq__params_8h.html#a30">APREQ_DECLARE_PARSER</a>(apreq_parse_multipart);
00317 
00328 APREQ_DECLARE(apreq_parser_t *)
00329         apreq_make_parser(<a class="codeRef" doxygen="apr.tag:http://apr.apache.org/docs/apr/" href="http://apr.apache.org/docs/apr/apr__pools_8h.html#a0">apr_pool_t</a> *pool,
00330                           <font class="keyword">const</font> <font class="keywordtype">char</font> *enctype,
00331                           <a class="codeRef" doxygen="apr.tag:http://apr.apache.org/docs/apr/" href="http://apr.apache.org/docs/apr/apr__errno_8h.html#a0">apr_status_t</a> (*parser) <a class="code" href="apreq__params_8h.html#a28">APREQ_PARSER_ARGS</a>,
00332                           apreq_hook_t *hook,
00333                           <font class="keywordtype">void</font> *ctx);
00334 
00344 APREQ_DECLARE(apreq_hook_t *)
00345         apreq_make_hook(<a class="codeRef" doxygen="apr.tag:http://apr.apache.org/docs/apr/" href="http://apr.apache.org/docs/apr/apr__pools_8h.html#a0">apr_pool_t</a> *pool,
00346                         <a class="codeRef" doxygen="apr.tag:http://apr.apache.org/docs/apr/" href="http://apr.apache.org/docs/apr/apr__errno_8h.html#a0">apr_status_t</a> (*hook) <a class="code" href="apreq__params_8h.html#a29">APREQ_HOOK_ARGS</a>,
00347                         apreq_hook_t *next,
00348                         <font class="keywordtype">void</font> *ctx);
00349 
00356 APREQ_DECLARE(<font class="keywordtype">void</font>) apreq_add_hook(apreq_parser_t *p, 
00357                                    apreq_hook_t *h);
00358 
00373 APREQ_DECLARE(apreq_parser_t *)apreq_parser(<font class="keywordtype">void</font> *env,
00374                                             apreq_hook_t *hook);
00375 
00377 <font class="preprocessor">#ifdef __cplusplus</font>
00378 <font class="preprocessor"></font>}
00379 <font class="preprocessor">#endif</font>
00380 <font class="preprocessor"></font>
00381 
00382 <font class="preprocessor">#endif </font><font class="comment">/* APREQ_PARAM_H */</font>
00383 
00384 
00385 
</pre></div><hr><address align="right"><small>Generated on Sat Jun 12 10:16:30 2004 for libapreq2 by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.15 </small></address>
</body>
</html>
