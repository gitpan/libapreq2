<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>apreq_env.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.2.15 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="modules.html">Modules</a> &nbsp; <a class="qindex" href="annotated.html">Data Structures</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Data Fields</a> &nbsp; <a class="qindex" href="globals.html">Globals</a> &nbsp; <a class="qindex" href="pages.html">Related Pages</a> &nbsp; </center>
<hr><h1>apreq_env.h</h1><a href="apreq__env_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <font class="comment">/*</font>
00002 <font class="comment">**  Copyright 2003-2004  The Apache Software Foundation</font>
00003 <font class="comment">**</font>
00004 <font class="comment">**  Licensed under the Apache License, Version 2.0 (the "License");</font>
00005 <font class="comment">**  you may not use this file except in compliance with the License.</font>
00006 <font class="comment">**  You may obtain a copy of the License at</font>
00007 <font class="comment">**</font>
00008 <font class="comment">**      http://www.apache.org/licenses/LICENSE-2.0</font>
00009 <font class="comment">**</font>
00010 <font class="comment">**  Unless required by applicable law or agreed to in writing, software</font>
00011 <font class="comment">**  distributed under the License is distributed on an "AS IS" BASIS,</font>
00012 <font class="comment">**  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</font>
00013 <font class="comment">**  See the License for the specific language governing permissions and</font>
00014 <font class="comment">**  limitations under the License.</font>
00015 <font class="comment">*/</font>
00016 
00017 <font class="preprocessor">#ifndef APREQ_ENV_H</font>
00018 <font class="preprocessor"></font><font class="preprocessor">#define APREQ_ENV_H</font>
00019 <font class="preprocessor"></font>
00020 <font class="preprocessor">#include "<a class="code" href="apreq__params_8h.html">apreq_params.h</a>"</font>
00021 <font class="preprocessor">#include "<a class="code" href="apreq__cookie_8h.html">apreq_cookie.h</a>"</font>
00022 
00023 <font class="preprocessor">#ifdef HAVE_SYSLOG</font>
00024 <font class="preprocessor"></font><font class="preprocessor">#include &lt;syslog.h&gt;</font>
00025 
00026 <font class="preprocessor">#ifndef LOG_PRIMASK</font>
00027 <font class="preprocessor"></font><font class="preprocessor">#define LOG_PRIMASK 7</font>
00028 <font class="preprocessor"></font><font class="preprocessor">#endif</font>
00029 <font class="preprocessor"></font>
00030 
00031 <font class="preprocessor">#define APREQ_LOG_EMERG     LOG_EMERG     </font><font class="comment">/* system is unusable */</font>
00032 <font class="preprocessor">#define APREQ_LOG_ALERT     LOG_ALERT     </font><font class="comment">/* action must be taken immediately */</font>
00033 <font class="preprocessor">#define APREQ_LOG_CRIT      LOG_CRIT      </font><font class="comment">/* critical conditions */</font>
00034 <font class="preprocessor">#define APREQ_LOG_ERR       LOG_ERR       </font><font class="comment">/* error conditions */</font>
00035 <font class="preprocessor">#define APREQ_LOG_WARNING   LOG_WARNING   </font><font class="comment">/* warning conditions */</font>
00036 <font class="preprocessor">#define APREQ_LOG_NOTICE    LOG_NOTICE    </font><font class="comment">/* normal but significant condition */</font>
00037 <font class="preprocessor">#define APREQ_LOG_INFO      LOG_INFO      </font><font class="comment">/* informational */</font>
00038 <font class="preprocessor">#define APREQ_LOG_DEBUG     LOG_DEBUG     </font><font class="comment">/* debug-level messages */</font>
00039 
00040 <font class="preprocessor">#define APREQ_LOG_LEVELMASK LOG_PRIMASK   </font><font class="comment">/* mask off the level value */</font>
00041 
00042 <font class="preprocessor">#else</font>
00043 <font class="preprocessor"></font>
00044 <font class="preprocessor">#define APREQ_LOG_EMERG     0   </font><font class="comment">/* system is unusable */</font>
00045 <font class="preprocessor">#define APREQ_LOG_ALERT     1   </font><font class="comment">/* action must be taken immediately */</font>
00046 <font class="preprocessor">#define APREQ_LOG_CRIT      2   </font><font class="comment">/* critical conditions */</font>
00047 <font class="preprocessor">#define APREQ_LOG_ERR       3   </font><font class="comment">/* error conditions */</font>
00048 <font class="preprocessor">#define APREQ_LOG_WARNING   4   </font><font class="comment">/* warning conditions */</font>
00049 <font class="preprocessor">#define APREQ_LOG_NOTICE    5   </font><font class="comment">/* normal but significant condition */</font>
00050 <font class="preprocessor">#define APREQ_LOG_INFO      6   </font><font class="comment">/* informational */</font>
00051 <font class="preprocessor">#define APREQ_LOG_DEBUG     7   </font><font class="comment">/* debug-level messages */</font>
00052 
00053 <font class="preprocessor">#define APREQ_LOG_LEVELMASK     7       </font><font class="comment">/* mask off the level value */</font>
00054 
00055 <font class="preprocessor">#endif</font>
00056 <font class="preprocessor"></font>
00057 <font class="preprocessor">#define APREQ_LOG_MARK  __FILE__ , __LINE__</font>
00058 <font class="preprocessor"></font>
00059 <font class="preprocessor">#define APREQ_DEBUG  APREQ_LOG_MARK, APREQ_LOG_DEBUG,</font>
00060 <font class="preprocessor"></font><font class="preprocessor">#define APREQ_WARN   APREQ_LOG_MARK, APREQ_LOG_WARNING,</font>
00061 <font class="preprocessor"></font><font class="preprocessor">#define APREQ_ERROR  APREQ_LOG_MARK, APREQ_LOG_ERR,</font>
00062 <font class="preprocessor"></font>
00063 <font class="preprocessor">#ifdef  __cplusplus</font>
00064 <font class="preprocessor"></font> <font class="keyword">extern</font> <font class="stringliteral">"C"</font> {
00065 <font class="preprocessor">#endif </font>
00066 <font class="preprocessor"></font>
00087 APREQ_DECLARE_NONSTD(<font class="keywordtype">void</font>) apreq_log(<font class="keyword">const</font> <font class="keywordtype">char</font> *file, <font class="keywordtype">int</font> line,
00088                                      <font class="keywordtype">int</font> level, <a class="codeRef" doxygen="apr.tag:http://apr.apache.org/docs/apr/" href="http://apr.apache.org/docs/apr/apr__errno_8h.html#a0">apr_status_t</a> status,
00089                                      <font class="keywordtype">void</font> *env, <font class="keyword">const</font> <font class="keywordtype">char</font> *fmt, ...);
00096 APREQ_DECLARE(<a class="codeRef" doxygen="apr.tag:http://apr.apache.org/docs/apr/" href="http://apr.apache.org/docs/apr/apr__pools_8h.html#a0">apr_pool_t</a> *) apreq_env_pool(<font class="keywordtype">void</font> *env);
00097 
00106 APREQ_DECLARE(<a class="code" href="structapreq__jar__t.html">apreq_jar_t</a> *) apreq_env_jar(<font class="keywordtype">void</font> *env, <a class="code" href="structapreq__jar__t.html">apreq_jar_t</a> *jar);
00107 
00116 APREQ_DECLARE(<a class="code" href="structapreq__request__t.html">apreq_request_t</a> *) apreq_env_request(<font class="keywordtype">void</font> *env,
00117                                                    <a class="code" href="structapreq__request__t.html">apreq_request_t</a> *req);
00118 
00124 APREQ_DECLARE(<font class="keyword">const</font> <font class="keywordtype">char</font> *) apreq_env_query_string(<font class="keywordtype">void</font> *env);
00125 
00133 APREQ_DECLARE(<font class="keyword">const</font> <font class="keywordtype">char</font> *) apreq_env_header_in(<font class="keywordtype">void</font> *env, <font class="keyword">const</font> <font class="keywordtype">char</font> *name);
00134 
00135 
<a name="l00141"></a><a class="code" href="group__ENV.html#a13">00141</a> <font class="preprocessor">#define apreq_env_content_type(env) apreq_env_header_in(env, "Content-Type")</font>
00142 <font class="preprocessor"></font>
00143 
<a name="l00149"></a><a class="code" href="group__ENV.html#a14">00149</a> <font class="preprocessor">#define apreq_env_cookie(env) apreq_env_header_in(env, "Cookie")</font>
00150 <font class="preprocessor"></font>
<a name="l00156"></a><a class="code" href="group__ENV.html#a15">00156</a> <font class="preprocessor">#define apreq_env_cookie2(env) apreq_env_header_in(env, "Cookie2")</font>
00157 <font class="preprocessor"></font>
00165 APREQ_DECLARE(<a class="codeRef" doxygen="apr.tag:http://apr.apache.org/docs/apr/" href="http://apr.apache.org/docs/apr/apr__errno_8h.html#a0">apr_status_t</a>)apreq_env_header_out(<font class="keywordtype">void</font> *env, 
00166                                                 <font class="keyword">const</font> <font class="keywordtype">char</font> *name,
00167                                                 <font class="keywordtype">char</font> *val);
00168 
<a name="l00175"></a><a class="code" href="group__ENV.html#a16">00175</a> <font class="preprocessor">#define apreq_env_set_cookie(e,s) apreq_env_header_out(e,"Set-Cookie",s)</font>
00176 <font class="preprocessor"></font>
<a name="l00183"></a><a class="code" href="group__ENV.html#a17">00183</a> <font class="preprocessor">#define apreq_env_set_cookie2(e,s) apreq_env_header_out(e,"Set-Cookie2",s)</font>
00184 <font class="preprocessor"></font>
00194 APREQ_DECLARE(<a class="codeRef" doxygen="apr.tag:http://apr.apache.org/docs/apr/" href="http://apr.apache.org/docs/apr/apr__errno_8h.html#a0">apr_status_t</a>) apreq_env_read(<font class="keywordtype">void</font> *env,
00195                                            <a class="codeRef" doxygen="apu.tag:http://apr.apache.org/docs/apr-util/" href="http://apr.apache.org/docs/apr-util/apr__buckets_8h.html#a111">apr_read_type_e</a> block,
00196                                            <a class="codeRef" doxygen="apr.tag:http://apr.apache.org/docs/apr/" href="http://apr.apache.org/docs/apr/apr_8h.html#a9">apr_off_t</a> bytes);
00197 
00206 APREQ_DECLARE(<font class="keyword">const</font> <font class="keywordtype">char</font> *) apreq_env_temp_dir(<font class="keywordtype">void</font> *env, <font class="keyword">const</font> <font class="keywordtype">char</font> *path);
00207 
00218 APREQ_DECLARE(<a class="codeRef" doxygen="apr.tag:http://apr.apache.org/docs/apr/" href="http://apr.apache.org/docs/apr/apr_8h.html#a9">apr_off_t</a>) apreq_env_max_body(<font class="keywordtype">void</font> *env, <a class="codeRef" doxygen="apr.tag:http://apr.apache.org/docs/apr/" href="http://apr.apache.org/docs/apr/apr_8h.html#a9">apr_off_t</a> bytes);
00219 
00230 APREQ_DECLARE(<a class="codeRef" doxygen="apr.tag:http://apr.apache.org/docs/apr/" href="http://apr.apache.org/docs/apr/apr_8h.html#a8">apr_ssize_t</a>) apreq_env_max_brigade(<font class="keywordtype">void</font> *env, <a class="codeRef" doxygen="apr.tag:http://apr.apache.org/docs/apr/" href="http://apr.apache.org/docs/apr/apr_8h.html#a8">apr_ssize_t</a> bytes);
00231 
<a name="l00237"></a><a class="code" href="structapreq__env__t.html">00237</a> <font class="keyword">typedef</font> <font class="keyword">struct </font><a class="code" href="structapreq__env__t.html">apreq_env_t</a> {
00238     <font class="keyword">const</font> <font class="keywordtype">char</font> *name;
00239     <a class="codeRef" doxygen="apr.tag:http://apr.apache.org/docs/apr/" href="http://apr.apache.org/docs/apr/apr_8h.html#a4">apr_uint32_t</a> magic_number;
00240     <a class="codeRef" doxygen="apu.tag:http://apr.apache.org/docs/apr-util/" href="http://apr.apache.org/docs/apr-util/apr__optional_8h.html#a0">void</a> (*log)(<font class="keyword">const</font> <font class="keywordtype">char</font> *,<font class="keywordtype">int</font>,<font class="keywordtype">int</font>,<a class="codeRef" doxygen="apr.tag:http://apr.apache.org/docs/apr/" href="http://apr.apache.org/docs/apr/apr__errno_8h.html#a0">apr_status_t</a>,<font class="keywordtype">void</font> *,<font class="keyword">const</font> <font class="keywordtype">char</font> *,va_list);
00241     <a class="codeRef" doxygen="apr.tag:http://apr.apache.org/docs/apr/" href="http://apr.apache.org/docs/apr/apr__pools_8h.html#a0">apr_pool_t</a> *(*pool)(<font class="keywordtype">void</font> *);
00242     <a class="code" href="structapreq__jar__t.html">apreq_jar_t</a> *(*jar)(<font class="keywordtype">void</font> *,<a class="code" href="structapreq__jar__t.html">apreq_jar_t</a> *);
00243     <a class="code" href="structapreq__request__t.html">apreq_request_t</a> *(*request)(<font class="keywordtype">void</font> *,<a class="code" href="structapreq__request__t.html">apreq_request_t</a> *);
00244     <font class="keyword">const</font> <font class="keywordtype">char</font> *(*query_string)(<font class="keywordtype">void</font> *);
00245     <font class="keyword">const</font> <font class="keywordtype">char</font> *(*header_in)(<font class="keywordtype">void</font> *,<font class="keyword">const</font> <font class="keywordtype">char</font> *);
00246     <a class="codeRef" doxygen="apr.tag:http://apr.apache.org/docs/apr/" href="http://apr.apache.org/docs/apr/apr__errno_8h.html#a0">apr_status_t</a> (*header_out)(<font class="keywordtype">void</font> *, <font class="keyword">const</font> <font class="keywordtype">char</font> *,<font class="keywordtype">char</font> *);
00247     <a class="codeRef" doxygen="apr.tag:http://apr.apache.org/docs/apr/" href="http://apr.apache.org/docs/apr/apr__errno_8h.html#a0">apr_status_t</a> (*read)(<font class="keywordtype">void</font> *,<a class="codeRef" doxygen="apu.tag:http://apr.apache.org/docs/apr-util/" href="http://apr.apache.org/docs/apr-util/apr__buckets_8h.html#a111">apr_read_type_e</a>,<a class="codeRef" doxygen="apr.tag:http://apr.apache.org/docs/apr/" href="http://apr.apache.org/docs/apr/apr_8h.html#a9">apr_off_t</a>);
00248     <font class="keyword">const</font> <font class="keywordtype">char</font> *(*temp_dir)(<font class="keywordtype">void</font> *, <font class="keyword">const</font> <font class="keywordtype">char</font> *);
00249     <a class="codeRef" doxygen="apr.tag:http://apr.apache.org/docs/apr/" href="http://apr.apache.org/docs/apr/apr_8h.html#a9">apr_off_t</a> (*max_body)(<font class="keywordtype">void</font> *,<a class="codeRef" doxygen="apr.tag:http://apr.apache.org/docs/apr/" href="http://apr.apache.org/docs/apr/apr_8h.html#a9">apr_off_t</a>);
00250     <a class="codeRef" doxygen="apr.tag:http://apr.apache.org/docs/apr/" href="http://apr.apache.org/docs/apr/apr_8h.html#a8">apr_ssize_t</a> (*max_brigade)(<font class="keywordtype">void</font> *, <a class="codeRef" doxygen="apr.tag:http://apr.apache.org/docs/apr/" href="http://apr.apache.org/docs/apr/apr_8h.html#a8">apr_ssize_t</a>);
00251 } <a class="code" href="structapreq__env__t.html">apreq_env_t</a>;
00252 
<a name="l00262"></a><a class="code" href="group__ENV.html#a18">00262</a> <font class="preprocessor">#define APREQ_ENV_MODULE(pre, name, mmn) const apreq_env_t pre##_module = { \</font>
00263 <font class="preprocessor">  name, mmn, pre##_log, pre##_pool, pre##_jar, pre##_request,               \</font>
00264 <font class="preprocessor">  pre##_query_string, pre##_header_in, pre##_header_out, pre##_read,        \</font>
00265 <font class="preprocessor">  pre##_temp_dir, pre##_max_body, pre##_max_brigade }</font>
00266 <font class="preprocessor"></font>
00267 
00275 APREQ_DECLARE(<font class="keyword">const</font> <a class="code" href="structapreq__env__t.html">apreq_env_t</a> *) apreq_env_module(<font class="keyword">const</font> <a class="code" href="structapreq__env__t.html">apreq_env_t</a> *mod);
00276 
<a name="l00280"></a><a class="code" href="group__ENV.html#a19">00280</a> <font class="preprocessor">#define apreq_env_name (apreq_env_module(NULL)-&gt;name)</font>
00281 <font class="preprocessor"></font>
<a name="l00285"></a><a class="code" href="group__ENV.html#a20">00285</a> <font class="preprocessor">#define apreq_env_magic_number (apreq_env_module(NULL)-&gt;magic_number)</font>
00286 <font class="preprocessor"></font>
00288 <font class="preprocessor">#ifdef __cplusplus</font>
00289 <font class="preprocessor"></font> }
00290 <font class="preprocessor">#endif</font>
00291 <font class="preprocessor"></font>
00292 <font class="preprocessor">#endif</font>
</pre></div><hr><address align="right"><small>Generated on Sat Jun 12 10:16:30 2004 for libapreq2 by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.15 </small></address>
</body>
</html>
