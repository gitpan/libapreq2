<html>
<head>
  <link rel="stylesheet" type="text/css" href="dox.css" />
  <title>libapreq2-2.04-dev: libapreq2: src/apreq_cookie.h File Reference</title> 
</head>
<body>
<div id="page-header">
<p class="menu">
   <a href="http://www.apache.org/">Apache Software Foundation</a> &gt; <a href="http://httpd.apache.org">HTTP Server Project</a> &gt;
<a href="http://httpd.apache.org/apreq/">Request Library Subproject</a></p>
<p class="apache">Apache HTTP Server Request Library</p>
<img alt="" src="feather.gif" /></div>
<!-- Generated by Doxygen 1.3.8 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="annotated.html">Data&nbsp;Structures</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Data&nbsp;Fields</a> | <a class="qindex" href="globals.html">Globals</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1>src/apreq_cookie.h File Reference</h1>Cookies and Jars. <a href="#_details">More...</a>
<p>
<code>#include "<a class="el" href="apreq_8h-source.html">apreq.h</a>"</code><br>
<code>#include "<a class="elRef" doxygen="apr.tag:http://apr.apache.org/docs/apr/" href="http://apr.apache.org/docs/apr/apr__tables_8h.html">apr_tables.h</a>"</code><br>

<p>
<a href="apreq__cookie_8h-source.html">Go to the source code of this file.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>struct &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="structapreq__jar__t.html">apreq_jar_t</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This is the container class for libapreq cookies.  <a href="structapreq__jar__t.html#_details">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>struct &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="structapreq__cookie__t.html">apreq_cookie_t</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Cookie type, supporting both Netscape and RFC cookie specifications.  <a href="structapreq__cookie__t.html#_details">More...</a><br></td></tr>
<tr><td colspan=2><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="apreq__cookie_8h.html#a0">APREQ_COOKIE_VERSION_DEFAULT</a>&nbsp;&nbsp;&nbsp;APREQ_COOKIE_VERSION_NETSCAPE</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="apreq__cookie_8h.html#a1">APREQ_COOKIE_MAX_LENGTH</a>&nbsp;&nbsp;&nbsp;4096</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><b>apreq_value_to_cookie</b>(ptr)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="anchor" name="a3" doxytag="apreq_cookie.h::apreq_cookie_name" ></a>
#define&nbsp;</td><td class="memItemRight" valign=bottom><b>apreq_cookie_name</b>(c)&nbsp;&nbsp;&nbsp;((c)-&gt;v.name)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="anchor" name="a4" doxytag="apreq_cookie.h::apreq_cookie_value" ></a>
#define&nbsp;</td><td class="memItemRight" valign=bottom><b>apreq_cookie_value</b>(c)&nbsp;&nbsp;&nbsp;((c)-&gt;v.data)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="anchor" name="a5" doxytag="apreq_cookie.h::apreq_jar_items" ></a>
#define&nbsp;</td><td class="memItemRight" valign=bottom><b>apreq_jar_items</b>(j)&nbsp;&nbsp;&nbsp;<a class="elRef" doxygen="apr.tag:http://apr.apache.org/docs/apr/" href="http://apr.apache.org/docs/apr/group__apr__tables.html#gga4">apr_table_elts</a>(j-&gt;cookies)-&gt;nelts</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="anchor" name="a6" doxytag="apreq_cookie.h::apreq_jar_nelts" ></a>
#define&nbsp;</td><td class="memItemRight" valign=bottom><b>apreq_jar_nelts</b>(j)&nbsp;&nbsp;&nbsp;<a class="elRef" doxygen="apr.tag:http://apr.apache.org/docs/apr/" href="http://apr.apache.org/docs/apr/group__apr__tables.html#gga4">apr_table_elts</a>(j-&gt;cookies)-&gt;nelts</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="anchor" name="a7" doxytag="apreq_cookie.h::apreq_add_cookie" ></a>
#define&nbsp;</td><td class="memItemRight" valign=bottom><b>apreq_add_cookie</b>(j, c)&nbsp;&nbsp;&nbsp;apreq_jar_add(j,c)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="anchor" name="a8" doxytag="apreq_cookie.h::apreq_make_cookie" ></a>
#define&nbsp;</td><td class="memItemRight" valign=bottom><b>apreq_make_cookie</b>(p, n, nl, v, vl)&nbsp;&nbsp;&nbsp;apreq_cookie_make(p,n,nl,v,vl)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="anchor" name="a9" doxytag="apreq_cookie.h::apreq_serialize_cookie" ></a>
#define&nbsp;</td><td class="memItemRight" valign=bottom><b>apreq_serialize_cookie</b>(buf, len, c)&nbsp;&nbsp;&nbsp;apreq_cookie_serialize(c,buf,len)</td></tr>

<tr><td colspan=2><br><h2>Typedefs</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="anchor" name="a10" doxytag="apreq_cookie.h::apreq_jar_t" ></a>
typedef <a class="el" href="structapreq__jar__t.html">apreq_jar_t</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="apreq__cookie_8h.html#a10">apreq_jar_t</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This is the container class for libapreq cookies. <br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="anchor" name="a11" doxytag="apreq_cookie.h::apreq_cookie_t" ></a>
typedef <a class="el" href="structapreq__cookie__t.html">apreq_cookie_t</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="apreq__cookie_8h.html#a11">apreq_cookie_t</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Cookie type, supporting both Netscape and RFC cookie specifications. <br></td></tr>
<tr><td colspan=2><br><h2>Enumerations</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>enum &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="apreq__cookie_8h.html#a25">apreq_cookie_version_t</a> { <b>APREQ_COOKIE_VERSION_NETSCAPE</b>, 
<b>APREQ_COOKIE_VERSION_RFC</b>
 }</td></tr>

<tr><td colspan=2><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="structapreq__cookie__t.html">apreq_cookie_t</a> *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="apreq__cookie_8h.html#a14">apreq_cookie</a> (const <a class="el" href="structapreq__jar__t.html">apreq_jar_t</a> *jar, const char *name)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="apreq__cookie_8h.html#a15">apreq_jar_add</a> (<a class="el" href="structapreq__jar__t.html">apreq_jar_t</a> *jar, const <a class="el" href="structapreq__cookie__t.html">apreq_cookie_t</a> *c)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="structapreq__jar__t.html">apreq_jar_t</a> *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="apreq__cookie_8h.html#a16">apreq_jar</a> (void *env, const char *hdr)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="structapreq__cookie__t.html">apreq_cookie_t</a> *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="apreq__cookie_8h.html#a17">apreq_cookie_make</a> (<a class="elRef" doxygen="apr.tag:http://apr.apache.org/docs/apr/" href="http://apr.apache.org/docs/apr/apr__pools_8h.html#ga0">apr_pool_t</a> *pool, const char *name, const <a class="elRef" doxygen="apr.tag:http://apr.apache.org/docs/apr/" href="http://apr.apache.org/docs/apr/apr_8h.html#ga7">apr_size_t</a> nlen, const char *value, const <a class="elRef" doxygen="apr.tag:http://apr.apache.org/docs/apr/" href="http://apr.apache.org/docs/apr/apr_8h.html#ga7">apr_size_t</a> vlen)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="elRef" doxygen="apr.tag:http://apr.apache.org/docs/apr/" href="http://apr.apache.org/docs/apr/apr__errno_8h.html#ga0">apr_status_t</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="apreq__cookie_8h.html#a18">apreq_cookie_attr</a> (<a class="elRef" doxygen="apr.tag:http://apr.apache.org/docs/apr/" href="http://apr.apache.org/docs/apr/apr__pools_8h.html#ga0">apr_pool_t</a> *p, <a class="el" href="structapreq__cookie__t.html">apreq_cookie_t</a> *c, const char *attr, <a class="elRef" doxygen="apr.tag:http://apr.apache.org/docs/apr/" href="http://apr.apache.org/docs/apr/apr_8h.html#ga7">apr_size_t</a> alen, const char *val, <a class="elRef" doxygen="apr.tag:http://apr.apache.org/docs/apr/" href="http://apr.apache.org/docs/apr/apr_8h.html#ga7">apr_size_t</a> vlen)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>char *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="apreq__cookie_8h.html#a19">apreq_cookie_as_string</a> (const <a class="el" href="structapreq__cookie__t.html">apreq_cookie_t</a> *c, <a class="elRef" doxygen="apr.tag:http://apr.apache.org/docs/apr/" href="http://apr.apache.org/docs/apr/apr__pools_8h.html#ga0">apr_pool_t</a> *p)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="apreq__cookie_8h.html#a20">apreq_cookie_serialize</a> (const <a class="el" href="structapreq__cookie__t.html">apreq_cookie_t</a> *c, char *buf, <a class="elRef" doxygen="apr.tag:http://apr.apache.org/docs/apr/" href="http://apr.apache.org/docs/apr/apr_8h.html#ga7">apr_size_t</a> len)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="apreq__cookie_8h.html#a21">apreq_cookie_expires</a> (<a class="el" href="structapreq__cookie__t.html">apreq_cookie_t</a> *c, const char *time_str)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="elRef" doxygen="apr.tag:http://apr.apache.org/docs/apr/" href="http://apr.apache.org/docs/apr/apr__errno_8h.html#ga0">apr_status_t</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="apreq__cookie_8h.html#a22">apreq_cookie_bake</a> (const <a class="el" href="structapreq__cookie__t.html">apreq_cookie_t</a> *c, void *env)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="elRef" doxygen="apr.tag:http://apr.apache.org/docs/apr/" href="http://apr.apache.org/docs/apr/apr__errno_8h.html#ga0">apr_status_t</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="apreq__cookie_8h.html#a23">apreq_cookie_bake2</a> (const <a class="el" href="structapreq__cookie__t.html">apreq_cookie_t</a> *c, void *env)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="apreq__cookie_8h.html#a25">apreq_cookie_version_t</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="apreq__cookie_8h.html#a24">apreq_ua_cookie_version</a> (void *env)</td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Cookies and Jars. 
<p>
<a class="el" href="apreq__cookie_8h.html">apreq_cookie.h</a> describes a common server-side API for request (incoming) and response (outgoing) cookies. It aims towards compliance with the standard cookie specifications listed below.<p>
<dl compact><dt><b>See also:</b></dt><dd><a href="http://wp.netscape.com/newsref/std/cookie_spec.html">http://wp.netscape.com/newsref/std/cookie_spec.html</a> <p>
<a href="http://www.ietf.org/rfc/rfc2109.txt">http://www.ietf.org/rfc/rfc2109.txt</a> <p>
<a href="http://www.ietf.org/rfc/rfc2964.txt">http://www.ietf.org/rfc/rfc2964.txt</a> <p>
<a href="http://www.ietf.org/rfc/rfc2965.txt">http://www.ietf.org/rfc/rfc2965.txt</a></dd></dl>
<hr><h2>Define Documentation</h2>
<a class="anchor" name="a1" doxytag="apreq_cookie.h::APREQ_COOKIE_MAX_LENGTH" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define APREQ_COOKIE_MAX_LENGTH&nbsp;&nbsp;&nbsp;4096          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Maximum length of a single Set-Cookie(2) header     </td>
  </tr>
</table>
<a class="anchor" name="a0" doxytag="apreq_cookie.h::APREQ_COOKIE_VERSION_DEFAULT" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define APREQ_COOKIE_VERSION_DEFAULT&nbsp;&nbsp;&nbsp;APREQ_COOKIE_VERSION_NETSCAPE          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Default version, used when creating a new cookie. See <a class="el" href="apreq__cookie_8h.html#a17">apreq_cookie_make()</a>.     </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="apreq_cookie.h::apreq_value_to_cookie" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define apreq_value_to_cookie          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">ptr&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Value:</b><pre class="fragment"><div>apreq_attr_to_type(<a class="code" href="structapreq__cookie__t.html">apreq_cookie_t</a>, \
                                                      v, ptr)
</div></pre>    </td>
  </tr>
</table>
<hr><h2>Enumeration Type Documentation</h2>
<a class="anchor" name="a25" doxytag="apreq_cookie.h::apreq_cookie_version_t" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> enum <a class="el" href="apreq__cookie_8h.html#a25">apreq_cookie_version_t</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Cookie Version. libapreq does not distinguish between rfc2109 and its successor rfc2965; both are referred to as APREQ_COOKIE_VERSION_RFC. Users can distinguish between them in their outgoing cookies by using <a class="el" href="apreq__cookie_8h.html#a22">apreq_cookie_bake()</a> for sending rfc2109 cookies, or <a class="el" href="apreq__cookie_8h.html#a23">apreq_cookie_bake2()</a> for rfc2965. The original Netscape cookie spec is still preferred for its greater portability, it is named APREQ_COOKIE_VERSION_NETSCAPE.     </td>
  </tr>
</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="a14" doxytag="apreq_cookie.h::apreq_cookie" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="structapreq__cookie__t.html">apreq_cookie_t</a>* apreq_cookie           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="structapreq__jar__t.html">apreq_jar_t</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>jar</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>name</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Fetches a cookie from the jar<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td></td><td valign=top><em>jar</em>&nbsp;</td><td>The cookie jar. </td></tr>
    <tr><td></td><td valign=top><em>name</em>&nbsp;</td><td>The name of the desired cookie. </td></tr>
  </table>
</dl>
    </td>
  </tr>
</table>
<a class="anchor" name="a19" doxytag="apreq_cookie.h::apreq_cookie_as_string" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> char* apreq_cookie_as_string           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="structapreq__cookie__t.html">apreq_cookie_t</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>c</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="elRef" doxygen="apr.tag:http://apr.apache.org/docs/apr/" href="http://apr.apache.org/docs/apr/apr__pools_8h.html#ga0">apr_pool_t</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>p</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Returns a string that represents the cookie as it would appear in a valid "Set-Cookie*" header.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td></td><td valign=top><em>c</em>&nbsp;</td><td>The cookie. </td></tr>
    <tr><td></td><td valign=top><em>p</em>&nbsp;</td><td>The pool. </td></tr>
  </table>
</dl>
    </td>
  </tr>
</table>
<a class="anchor" name="a18" doxytag="apreq_cookie.h::apreq_cookie_attr" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="elRef" doxygen="apr.tag:http://apr.apache.org/docs/apr/" href="http://apr.apache.org/docs/apr/apr__errno_8h.html#ga0">apr_status_t</a> apreq_cookie_attr           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="elRef" doxygen="apr.tag:http://apr.apache.org/docs/apr/" href="http://apr.apache.org/docs/apr/apr__pools_8h.html#ga0">apr_pool_t</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>p</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="structapreq__cookie__t.html">apreq_cookie_t</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>c</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>attr</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="elRef" doxygen="apr.tag:http://apr.apache.org/docs/apr/" href="http://apr.apache.org/docs/apr/apr_8h.html#ga7">apr_size_t</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>alen</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>val</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="elRef" doxygen="apr.tag:http://apr.apache.org/docs/apr/" href="http://apr.apache.org/docs/apr/apr_8h.html#ga7">apr_size_t</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>vlen</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Sets the associated cookie attribute. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td></td><td valign=top><em>p</em>&nbsp;</td><td>Pool for allocating the new attribute. </td></tr>
    <tr><td></td><td valign=top><em>c</em>&nbsp;</td><td>Cookie. </td></tr>
    <tr><td></td><td valign=top><em>attr</em>&nbsp;</td><td>Name of attribute- leading '-' or '$' characters are ignored. </td></tr>
    <tr><td></td><td valign=top><em>alen</em>&nbsp;</td><td>Length of attr. </td></tr>
    <tr><td></td><td valign=top><em>val</em>&nbsp;</td><td>Value of new attribute. </td></tr>
    <tr><td></td><td valign=top><em>vlen</em>&nbsp;</td><td>Length of new attribute. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Remarks:</b></dt><dd>Ensures cookie version &amp; time are kept in sync. </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="a22" doxytag="apreq_cookie.h::apreq_cookie_bake" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="elRef" doxygen="apr.tag:http://apr.apache.org/docs/apr/" href="http://apr.apache.org/docs/apr/apr__errno_8h.html#ga0">apr_status_t</a> apreq_cookie_bake           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="structapreq__cookie__t.html">apreq_cookie_t</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>c</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>void *&nbsp;</td>
          <td class="mdname" nowrap> <em>env</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Add the cookie to the outgoing "Set-Cookie" headers.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td></td><td valign=top><em>c</em>&nbsp;</td><td>The cookie. </td></tr>
    <tr><td></td><td valign=top><em>env</em>&nbsp;</td><td>Environment. </td></tr>
  </table>
</dl>
    </td>
  </tr>
</table>
<a class="anchor" name="a23" doxytag="apreq_cookie.h::apreq_cookie_bake2" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="elRef" doxygen="apr.tag:http://apr.apache.org/docs/apr/" href="http://apr.apache.org/docs/apr/apr__errno_8h.html#ga0">apr_status_t</a> apreq_cookie_bake2           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="structapreq__cookie__t.html">apreq_cookie_t</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>c</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>void *&nbsp;</td>
          <td class="mdname" nowrap> <em>env</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Add the cookie to the outgoing "Set-Cookie2" headers.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td></td><td valign=top><em>c</em>&nbsp;</td><td>The cookie. </td></tr>
    <tr><td></td><td valign=top><em>env</em>&nbsp;</td><td>Environment. </td></tr>
  </table>
</dl>
    </td>
  </tr>
</table>
<a class="anchor" name="a21" doxytag="apreq_cookie.h::apreq_cookie_expires" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void apreq_cookie_expires           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="structapreq__cookie__t.html">apreq_cookie_t</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>c</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>time_str</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Set the Cookie's expiration date.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td></td><td valign=top><em>c</em>&nbsp;</td><td>The cookie. </td></tr>
    <tr><td></td><td valign=top><em>time_str</em>&nbsp;</td><td>If NULL, the Cookie's expiration date is unset, making it a session cookie. This means no "expires" or "max-age" attribute will appear in the cookie's serialized form. If time_str is not NULL, the expiration date will be reset to the offset (from now) represented by time_str. The time_str should be in a format that <a class="el" href="apreq_8h.html#a42">apreq_atoi64t()</a> can understand, namely /[+-]?+*[YMDhms]/. </td></tr>
  </table>
</dl>
    </td>
  </tr>
</table>
<a class="anchor" name="a17" doxytag="apreq_cookie.h::apreq_cookie_make" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="structapreq__cookie__t.html">apreq_cookie_t</a>* apreq_cookie_make           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="elRef" doxygen="apr.tag:http://apr.apache.org/docs/apr/" href="http://apr.apache.org/docs/apr/apr__pools_8h.html#ga0">apr_pool_t</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>pool</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>const <a class="elRef" doxygen="apr.tag:http://apr.apache.org/docs/apr/" href="http://apr.apache.org/docs/apr/apr_8h.html#ga7">apr_size_t</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>nlen</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>value</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>const <a class="elRef" doxygen="apr.tag:http://apr.apache.org/docs/apr/" href="http://apr.apache.org/docs/apr/apr_8h.html#ga7">apr_size_t</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>vlen</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Returns a new cookie, made from the argument list.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td></td><td valign=top><em>pool</em>&nbsp;</td><td>Pool which allocates the cookie. </td></tr>
    <tr><td></td><td valign=top><em>name</em>&nbsp;</td><td>The cookie's name. </td></tr>
    <tr><td></td><td valign=top><em>nlen</em>&nbsp;</td><td>Length of name. </td></tr>
    <tr><td></td><td valign=top><em>value</em>&nbsp;</td><td>The cookie's value. </td></tr>
    <tr><td></td><td valign=top><em>vlen</em>&nbsp;</td><td>Length of value. </td></tr>
  </table>
</dl>
    </td>
  </tr>
</table>
<a class="anchor" name="a20" doxytag="apreq_cookie.h::apreq_cookie_serialize" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int apreq_cookie_serialize           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="structapreq__cookie__t.html">apreq_cookie_t</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>c</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>char *&nbsp;</td>
          <td class="mdname" nowrap> <em>buf</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="elRef" doxygen="apr.tag:http://apr.apache.org/docs/apr/" href="http://apr.apache.org/docs/apr/apr_8h.html#ga7">apr_size_t</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>len</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Same functionality as apreq_cookie_as_string. Stores the string representation in buf, using up to len bytes in buf as storage. The return value has the same semantics as that of apr_snprintf, including the special behavior for a "len = 0" argument.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td></td><td valign=top><em>c</em>&nbsp;</td><td>The cookie. </td></tr>
    <tr><td></td><td valign=top><em>buf</em>&nbsp;</td><td>Storage location for the result. </td></tr>
    <tr><td></td><td valign=top><em>len</em>&nbsp;</td><td>Size of buf's storage area. </td></tr>
  </table>
</dl>
    </td>
  </tr>
</table>
<a class="anchor" name="a16" doxytag="apreq_cookie.h::apreq_jar" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="structapreq__jar__t.html">apreq_jar_t</a>* apreq_jar           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void *&nbsp;</td>
          <td class="mdname" nowrap> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>hdr</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Parse the incoming "Cookie:" headers into a cookie jar.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td></td><td valign=top><em>env</em>&nbsp;</td><td>The current environment. </td></tr>
    <tr><td></td><td valign=top><em>hdr</em>&nbsp;</td><td>String to parse as a HTTP-merged "Cookie" header. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Remarks:</b></dt><dd>"data = NULL" has special behavior. In this case, apreq_jar(env,NULL) will attempt to fetch a cached object from the environment via apreq_env_jar. Failing that, it will replace "hdr" with the result of <a class="el" href="apreq__env_8h.html#a14">apreq_env_cookie(env)</a>, parse that, and store the resulting object back within the environment. This maneuver is designed to mimimize parsing work, since generating the cookie jar is relatively expensive. </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="a15" doxytag="apreq_cookie.h::apreq_jar_add" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void apreq_jar_add           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="structapreq__jar__t.html">apreq_jar_t</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>jar</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>const <a class="el" href="structapreq__cookie__t.html">apreq_cookie_t</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>c</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Adds a cookie by pushing it to the bottom of the jar.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td></td><td valign=top><em>jar</em>&nbsp;</td><td>The cookie jar. </td></tr>
    <tr><td></td><td valign=top><em>c</em>&nbsp;</td><td>The cookie to add. </td></tr>
  </table>
</dl>
    </td>
  </tr>
</table>
<a class="anchor" name="a24" doxytag="apreq_cookie.h::apreq_ua_cookie_version" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="apreq__cookie_8h.html#a25">apreq_cookie_version_t</a> apreq_ua_cookie_version           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>env</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Looks for the presence of a "Cookie2" header to determine whether or not the current User-Agent supports rfc2965. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td></td><td valign=top><em>env</em>&nbsp;</td><td>The current environment. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>APREQ_COOKIE_VERSION_RFC if rfc2965 is supported, APREQ_COOKIE_VERSION_NETSCAPE otherwise. </dd></dl>
    </td>
  </tr>
</table>
<div id="footer">
<p class="apache">
Copyright &copy; 2003-2004 <a href="http://www.apache.org">The Apache Software Foundation</a>.<br/>
See <a href="LICENSE.html">LICENSE</a>.</p>
<p class="menu">
<span style="color:#aaa">page generated by <a href="http://www.doxygen.org/"><code>doxygen</code></a>
version 1.3.8 on 30 Aug 2004</span>
</p>
</div>
</body>
</html>
